import { StatusBar, TitleBar, TemperatureBar, HumidityBar, Page, HorizontalBox, Slider } from "widgets.slint";

import { WeatherRecord } from "datatypes.slint";

export component TemperaturePage inherits Page {
    in property temperature-celsius <=> temperature-bar.value;
    in property has-temperature <=> temperature-bar.has-value;
    in property humidity-percent <=> humidity-bar.value;
    in property has-humidity <=> humidity-bar.has-value;

    HorizontalBox {
        temperature-bar := TemperatureBar {}
        humidity-bar := HumidityBar {}
    }
}

export component RecordingPage inherits Page {
    in property <[WeatherRecord]> records;

    Flickable {
        VerticalLayout {
            for record in records : Rectangle {
                HorizontalBox {
                    Text {
                        text: record.timestamp;
                    }
                    Text {
                        text: Math.round(record.temperature_celsius) + "Â°C";
                    }
                    Text {
                        text: Math.round(record.humidity_percent) + "%";
                    }
                }
            }
        }            
    }
}

export component ForecastPage inherits Page {
}


export component ScreenBrightnessPage inherits Page {
    out property screen-brightness <=> slider.value;
    callback screen-brightness-changed(float);
    
    padding: 4px;

    slider := Slider {
        width: parent.width * 80%;
        height: parent.height;

        minimum: 10; // Minimum brightness is 10%, to avoid black screen.
        maximum: 100;
        value: 100;
        changed => { root.screen-brightness-changed(self.value); }
    }
}
